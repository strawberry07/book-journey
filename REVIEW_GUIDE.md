# 内容审核系统使用指南

## 🎯 系统概述

内容审核系统会自动检查生成的内容质量，只有通过审核的内容才会对外显示。这确保了内容的质量和稳定性。

## 📋 工作流程

### 阶段 1: 启动期（前 2 周）
**频率：** 每天检查一次  
**时间：** 5-10 分钟

1. 访问管理界面：`https://你的railway-url.railway.app/admin.html`
2. 查看待审核列表
3. 逐个审核：
   - 阅读摘要预览
   - 检查质量问题（如果有）
   - 点击"批准"或"拒绝"
4. 记录常见问题，优化 prompt

### 阶段 2: 稳定期（2 周后）
**频率：** 每周 2-3 次  
**时间：** 10-15 分钟

1. 访问管理界面
2. 快速浏览，批量批准正常内容
3. 只关注有质量问题的内容
4. 使用"批准全部"按钮快速处理

### 阶段 3: 成熟期（1 个月后）
**频率：** 每周一次  
**时间：** 5-10 分钟

1. 主要处理用户反馈
2. 系统自动处理大部分内容
3. 偶尔检查整体质量

## 🚀 快速开始

### 1. 访问管理界面

在浏览器中打开：
```
https://你的railway-url.railway.app/admin.html
```

### 2. 查看待审核内容

界面会自动显示：
- 待审核数量
- 每个书籍的摘要预览
- 质量问题（如果有）

### 3. 审核内容

**批准：**
- 点击"✅ 批准"按钮
- 内容立即对外可见

**拒绝：**
- 点击"❌ 拒绝"按钮
- 输入拒绝原因（可选）
- 系统会删除该内容，下次访问时重新生成

**批量批准：**
- 点击"✅ 批准全部"按钮
- 一次性批准所有待审核内容

## 🔍 质量检查标准

系统会自动检查：

1. **完整性检查**
   - 三个版本（精华、思考、沉浸）都存在
   - 版本内容不相同

2. **长度检查**
   - 精华版：至少 200 字
   - 思考版：至少 800 字
   - 沉浸版：至少 1500 字

3. **格式检查**
   - 换行符不过多
   - 不包含错误信息

4. **内容检查**
   - 不包含明显的错误标记
   - 内容格式正常

## 📊 API 使用

### 查看待审核列表

```bash
curl https://你的url.railway.app/api/admin/pending
```

### 批准单个内容

```bash
curl -X POST https://你的url.railway.app/api/admin/approve \
  -H "Content-Type: application/json" \
  -d '{"bookId": 5}'
```

### 拒绝单个内容

```bash
curl -X POST https://你的url.railway.app/api/admin/reject \
  -H "Content-Type: application/json" \
  -d '{"bookId": 5, "reason": "格式问题"}'
```

### 批量批准

```bash
curl -X POST https://你的url.railway.app/api/admin/approve-batch \
  -H "Content-Type: application/json" \
  -d '{"bookIds": [1, 2, 3, 4, 5]}'
```

## ⚠️ 注意事项

1. **待审核内容不会对外显示**
   - 用户访问时会看到"内容审核中，请稍后再试"
   - 只有批准后的内容才会显示

2. **拒绝后会重新生成**
   - 拒绝的内容会被删除
   - 用户下次访问时会触发重新生成
   - 新生成的内容需要再次审核

3. **自动刷新**
   - 管理界面每 30 秒自动刷新
   - 也可以手动点击"🔄 刷新"按钮

4. **质量问题**
   - 如果自动检查发现问题，内容会被标记为"rejected"
   - 需要人工审核决定是否批准

## 🎯 最佳实践

### 启动期
- 仔细阅读每个摘要
- 建立质量标准
- 记录常见问题
- 优化 prompt（如果需要）

### 稳定期
- 快速浏览，批量处理
- 只关注异常情况
- 定期检查整体质量

### 成熟期
- 主要处理用户反馈
- 系统自动处理大部分
- 偶尔全面检查

## 🔧 故障排除

### 问题：管理界面无法访问

**解决方案：**
1. 检查服务器是否正常运行
2. 确认 URL 正确
3. 查看服务器日志

### 问题：待审核列表为空

**可能原因：**
1. 确实没有待审核内容
2. 所有内容都已批准
3. 缓存文件有问题

**解决方案：**
```bash
# 检查缓存状态
curl https://你的url.railway.app/api/admin/cache
```

### 问题：批准后用户仍看不到内容

**解决方案：**
1. 检查内容状态是否为 "approved"
2. 清除浏览器缓存
3. 检查服务器日志

## 📝 审核记录

系统会记录：
- 审核时间 (`reviewedAt`)
- 审核人 (`reviewedBy`)
- 审核状态 (`status`)
- 质量问题 (`validationIssues`)

这些信息保存在 `data/cache.json` 中。

---

**提示：** 建议将管理界面加入书签，方便快速访问！

