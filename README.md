# æ¯æ—¥ä¹¦æ—… ğŸ“š

> å°†ä¹¦å•è½¬åŒ–ä¸ºå¹´åº¦æ·±åº¦é˜…è¯»ä¹‹æ—…çš„ç§»åŠ¨ä¼˜å…ˆ Web åº”ç”¨

æ¯æ—¥ä¹¦æ—…æ˜¯ä¸€ä¸ªä¼˜é›…çš„æ¸è¿›å¼ Web åº”ç”¨ï¼ˆPWAï¼‰ï¼Œæ¯å¤©ä¸ºä½ ç²¾é€‰ä¸€æœ¬å¥½ä¹¦ï¼Œæä¾›ä¸‰ç§æ·±åº¦çš„é˜…è¯»ä½“éªŒï¼š3 åˆ†é’Ÿç²¾åã€10 åˆ†é’Ÿæ€è€ƒã€30 åˆ†é’Ÿæ²‰æµ¸ã€‚é€šè¿‡æ™ºèƒ½è½®æ’­ç®—æ³•ï¼Œç¡®ä¿æ¯æœ¬ä¹¦åœ¨ 14 å¤©å†…ä¸ä¼šé‡å¤å‡ºç°ï¼Œä¸ºä½ æ‰“é€ ä¸€æ•´å¹´çš„é˜…è¯»æ—…ç¨‹ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ“– æ ¸å¿ƒåŠŸèƒ½
- **æ¯æ—¥ç²¾é€‰**ï¼šæ¯ 24 å°æ—¶è‡ªåŠ¨é€‰æ‹©ä¸€æœ¬æ–°ä¹¦
- **æ™ºèƒ½è½®æ’­**ï¼š14 å¤©å†·å´æœŸï¼Œç¡®ä¿é˜…è¯»ä½“éªŒçš„å¤šæ ·æ€§
- **ä¸‰ç§æ·±åº¦**ï¼š
  - **3 åˆ†é’Ÿ Â· ç²¾å**ï¼š400 å­—ï¼Œå¿«é€Ÿäº†è§£ä¹¦ç±æ ¸å¿ƒä»·å€¼
  - **10 åˆ†é’Ÿ Â· æ€è€ƒ**ï¼š1200-1600 å­—ï¼Œæ·±å…¥ç†è§£æ ¸å¿ƒè§‚ç‚¹ï¼ŒåŒ…å«ç”Ÿæ´»åº”ç”¨ç¤ºä¾‹å’Œåæ€é—®é¢˜
  - **30 åˆ†é’Ÿ Â· æ²‰æµ¸**ï¼š2000-3000 å­—ï¼Œå…¨é¢åˆ†æï¼ŒåŒ…å«è·¨å­¦ç§‘è¿æ¥å’Œå®é™…åº”ç”¨
- **æ—¥æœŸå¯¼èˆª**ï¼šæµè§ˆå†å²å†…å®¹ï¼Œå›é¡¾è¿‡å¾€ä¹¦ç±
- **æ™ºèƒ½é¢„ç”Ÿæˆ**ï¼šè‡ªåŠ¨æå‰ç”Ÿæˆæœªæ¥å†…å®¹ï¼Œç¡®ä¿å¿«é€ŸåŠ è½½

### ğŸ¨ ç”¨æˆ·ä½“éªŒ
- **ç§»åŠ¨ä¼˜å…ˆè®¾è®¡**ï¼šä¸“ä¸ºæ‰‹æœºä¼˜åŒ–çš„å“åº”å¼ç•Œé¢
- **æ–°æ–‡äººé£æ ¼**ï¼šä¼˜é›…çš„æ’ç‰ˆå’Œé…è‰²ï¼Œè¥é€ é˜…è¯»æ°›å›´
- **PWA æ”¯æŒ**ï¼šå¯å®‰è£…åˆ°ä¸»å±å¹•ï¼Œæ”¯æŒç¦»çº¿è®¿é—®
- **åˆ†äº«åŠŸèƒ½**ï¼šç”Ÿæˆç²¾ç¾çš„åˆ†äº«å¡ç‰‡ï¼Œæ”¯æŒä¸‹è½½å’ŒåŸç”Ÿåˆ†äº«

### ğŸ¤– AI é©±åŠ¨
- **DeepSeek API é›†æˆ**ï¼šä½¿ç”¨ AI ç”Ÿæˆé«˜è´¨é‡çš„ä¸­æ–‡æ‘˜è¦
- **è‡ªåŠ¨è´¨é‡æ£€æŸ¥**ï¼šç³»ç»Ÿè‡ªåŠ¨éªŒè¯å†…å®¹è´¨é‡
- **æ™ºèƒ½ç¼“å­˜**ï¼šå‡å°‘ API è°ƒç”¨ï¼Œæå‡å“åº”é€Ÿåº¦

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **åç«¯**ï¼šNode.js (ES Modules)
- **å‰ç«¯**ï¼šåŸç”Ÿ HTML/CSS/JavaScript
- **AI æœåŠ¡**ï¼šDeepSeek API
- **éƒ¨ç½²**ï¼šRailway / æ”¯æŒå¤šç§å¹³å°
- **PWA**ï¼šService Worker + Web App Manifest

## ğŸ“¦ å®‰è£…ä¸è¿è¡Œ

### å‰ç½®è¦æ±‚
- Node.js >= 18
- DeepSeek API Keyï¼ˆä» [DeepSeek](https://www.deepseek.com/) è·å–ï¼‰

### æœ¬åœ°å¼€å‘

1. **å…‹éš†ä»“åº“**
```bash
git clone https://github.com/strawberry07/book-journey.git
cd book-journey
```

2. **å‡†å¤‡æ•°æ®æ–‡ä»¶**
```bash
# åˆ›å»ºæ•°æ®ç›®å½•
mkdir -p data

# å‡†å¤‡ä¹¦ç±æ•°æ®ï¼ˆbooks.jsonï¼‰
# æ ¼å¼ï¼š
# [
#   {
#     "id": 1,
#     "title_cn": "ä¸­æ–‡ä¹¦å",
#     "title_en": "English Title",
#     "author": "ä½œè€…å"
#   },
#   ...
# ]
```

3. **è®¾ç½®ç¯å¢ƒå˜é‡**
```bash
export DEEPSEEK_API_KEY="your-deepseek-api-key"
export PORT=3000  # å¯é€‰ï¼Œé»˜è®¤ 3000
export MAINTENANCE_MODE=false  # å¯é€‰ï¼Œç»´æŠ¤æ¨¡å¼
```

4. **å¯åŠ¨æœåŠ¡å™¨**
```bash
npm start
```

5. **è®¿é—®åº”ç”¨**
æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3000`

### å¯ç”¨è„šæœ¬

```bash
npm start          # å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm run dev        # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm test           # è¿è¡Œæµ‹è¯•
npm run test-admin # æµ‹è¯•ç®¡ç†åŠŸèƒ½
npm run test-pwa   # æµ‹è¯• PWA åŠŸèƒ½
npm run check      # æ£€æŸ¥åº”ç”¨å°±ç»ªçŠ¶æ€
npm run clear-cache # æ¸…é™¤ç¼“å­˜
```

## âš™ï¸ ç¯å¢ƒå˜é‡

| å˜é‡å | å¿…éœ€ | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|
| `DEEPSEEK_API_KEY` | âœ… | DeepSeek API å¯†é’¥ | `sk-xxxxx` |
| `PORT` | âŒ | æœåŠ¡å™¨ç«¯å£ | `3000` |
| `MAINTENANCE_MODE` | âŒ | ç»´æŠ¤æ¨¡å¼å¼€å…³ | `true` / `false` |

## ğŸ“ é¡¹ç›®ç»“æ„

```
book-journey/
â”œâ”€â”€ server.js              # ä¸»æœåŠ¡å™¨æ–‡ä»¶
â”œâ”€â”€ package.json           # é¡¹ç›®é…ç½®
â”œâ”€â”€ public/                # å‰ç«¯é™æ€æ–‡ä»¶
â”‚   â”œâ”€â”€ index.html         # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ app.js             # å‰ç«¯é€»è¾‘
â”‚   â”œâ”€â”€ styles.css         # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ manifest.json      # PWA é…ç½®
â”‚   â”œâ”€â”€ sw.js              # Service Worker
â”‚   â””â”€â”€ logo.svg           # åº”ç”¨å›¾æ ‡
â”œâ”€â”€ data/                  # æ•°æ®ç›®å½•ï¼ˆä¸æäº¤åˆ° Gitï¼‰
â”‚   â”œâ”€â”€ books.json         # ä¹¦ç±åˆ—è¡¨
â”‚   â”œâ”€â”€ cache.json         # æ‘˜è¦ç¼“å­˜
â”‚   â”œâ”€â”€ history.json       # é€‰æ‹©å†å²
â”‚   â””â”€â”€ state.json         # åº”ç”¨çŠ¶æ€
â”œâ”€â”€ test.js                # æµ‹è¯•è„šæœ¬
â””â”€â”€ README.md              # æœ¬æ–‡ä»¶
```

## ğŸ”Œ API ç«¯ç‚¹

### å…¬å¼€ç«¯ç‚¹

- `GET /api/book/today` - è·å–ä»Šæ—¥ä¹¦ç±
- `GET /api/book/date?date=YYYY-MM-DD` - è·å–æŒ‡å®šæ—¥æœŸçš„ä¹¦ç±
- `GET /api/book/:id/summary` - è·å–ä¹¦ç±æ‘˜è¦ï¼ˆä¸‰ç§æ·±åº¦ï¼‰
- `GET /health` - å¥åº·æ£€æŸ¥

### ç®¡ç†ç«¯ç‚¹

- `GET /api/admin/cache` - æŸ¥çœ‹ç¼“å­˜çŠ¶æ€
- `POST /api/admin/clear-cache` - æ¸…é™¤ç¼“å­˜
- `GET /api/admin/check-book?bookId=:id` - æ£€æŸ¥ç‰¹å®šä¹¦ç±çŠ¶æ€
- `POST /api/admin/pre-generate` - æ‰‹åŠ¨è§¦å‘é¢„ç”Ÿæˆ

## ğŸš€ éƒ¨ç½²

### Railway éƒ¨ç½²ï¼ˆæ¨èï¼‰

1. åœ¨ [Railway](https://railway.app/) åˆ›å»ºæ–°é¡¹ç›®
2. è¿æ¥ GitHub ä»“åº“
3. è®¾ç½®ç¯å¢ƒå˜é‡ï¼š
   - `DEEPSEEK_API_KEY`
   - `MAINTENANCE_MODE`ï¼ˆå¯é€‰ï¼‰
4. é…ç½®æŒä¹…åŒ–å­˜å‚¨ï¼ˆVolumeï¼‰ï¼š
   - æŒ‚è½½è·¯å¾„ï¼š`/app/data`
   - ç¡®ä¿ç¼“å­˜å’Œå†å²æ•°æ®æŒä¹…åŒ–
5. éƒ¨ç½²å®Œæˆï¼

è¯¦ç»†éƒ¨ç½²æŒ‡å—è¯·å‚è€ƒ [DEPLOYMENT.md](./DEPLOYMENT.md)

### å…¶ä»–å¹³å°

åº”ç”¨æ”¯æŒéƒ¨ç½²åˆ°ï¼š
- Heroku
- Render
- Fly.io
- VPSï¼ˆä½¿ç”¨ PM2 æˆ– systemdï¼‰

## ğŸ“ é…ç½®è¯´æ˜

### åº”ç”¨å¯åŠ¨æ—¥æœŸ

åº”ç”¨é»˜è®¤ä» **2026-01-01** å¼€å§‹è¿è¡Œã€‚å¯ä»¥åœ¨ `server.js` ä¸­ä¿®æ”¹ `APP_START_DATE` å¸¸é‡ã€‚

### ä¹¦ç±è½®æ’­è§„åˆ™

- **å†·å´æœŸ**ï¼šæ¯æœ¬ä¹¦åœ¨ 14 å¤©å†…ä¸ä¼šé‡å¤å‡ºç°
- **æ™ºèƒ½å›é€€**ï¼šå¦‚æœæ‰€æœ‰ä¹¦ç±éƒ½åœ¨å†·å´æœŸï¼Œç³»ç»Ÿä¼šå›é€€åˆ°æ‰€æœ‰ä¹¦ç±
- **åŠ¨æ€é€‚é…**ï¼šæ”¯æŒä»»æ„æ•°é‡çš„ä¹¦ç±ï¼Œä¸é™åˆ¶ä¸º 100 æœ¬

### é¢„ç”Ÿæˆç­–ç•¥

- **å¯åŠ¨æ—¶**ï¼šæœåŠ¡å™¨å¯åŠ¨ 5 ç§’åè‡ªåŠ¨æ£€æŸ¥å¹¶ç”Ÿæˆç¼ºå¤±å†…å®¹
- **å®šæ—¶ä»»åŠ¡**ï¼šæ¯å¤©å‡Œæ™¨ 2:00 è‡ªåŠ¨é¢„ç”Ÿæˆæœªæ¥ 14 å¤©çš„å†…å®¹
- **ä¼˜å…ˆçº§**ï¼šå¯åŠ¨æ—¥æœŸå’Œä»Šå¤©çš„å†…å®¹ä¼˜å…ˆç”Ÿæˆ

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡ŒåŸºç¡€æµ‹è¯•
npm test

# æµ‹è¯•ç®¡ç†åŠŸèƒ½
npm run test-admin

# æµ‹è¯• PWA åŠŸèƒ½
npm run test-pwa

# æ£€æŸ¥å°±ç»ªçŠ¶æ€
npm run check
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### æ·»åŠ æ–°ä¹¦ç±

ç¼–è¾‘ `data/books.json`ï¼Œæ·»åŠ æ–°ä¹¦ç±æ¡ç›®ï¼š

```json
{
  "id": 101,
  "title_cn": "æ–°ä¹¦å",
  "title_en": "New Book Title",
  "author": "ä½œè€…å"
}
```

é‡å¯æœåŠ¡å™¨åï¼Œæ–°ä¹¦ç±ä¼šè‡ªåŠ¨çº³å…¥è½®æ’­ç³»ç»Ÿã€‚

### æ¸…é™¤ç¼“å­˜

```bash
# æ¸…é™¤æ‰€æœ‰ç¼“å­˜
npm run clear-cache

# æ¸…é™¤ç‰¹å®šä¹¦ç±çš„ç¼“å­˜
npm run clear-cache clear 1 2 3
```

### ç»´æŠ¤æ¨¡å¼

è®¾ç½®ç¯å¢ƒå˜é‡ `MAINTENANCE_MODE=true` å¯ç”¨ç»´æŠ¤æ¨¡å¼ï¼Œåº”ç”¨ä¼šè¿”å› 503 çŠ¶æ€ç ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](./LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

- [DeepSeek](https://www.deepseek.com/) - æä¾› AI æ‘˜è¦ç”ŸæˆæœåŠ¡
- [html2canvas](https://html2canvas.hertzen.com/) - åˆ†äº«å¡ç‰‡å›¾ç‰‡ç”Ÿæˆ
- [Noto Serif SC](https://fonts.google.com/noto/specimen/Noto+Serif+SC) - ä¸­æ–‡å­—ä½“

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- æäº¤ [Issue](https://github.com/strawberry07/book-journey/issues)
- è®¿é—®åº”ç”¨ï¼š[åœ¨çº¿åœ°å€](https://your-app-url.railway.app)

---

**æ¯æ—¥ä¹¦æ—…** Â· è¯»ä¹¦ä¾¿ä½³ ğŸ“š

